(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[0],{71:function(e,t,a){"use strict";a.r(t);var r=a(5),n=a(2),o=a.n(n),l=a(4),s=a(1);var i=e=>{var{comment:t,author:a,email:r,formIsSubmitting:n,formSubmittedSuccessfully:o,formSubmittedFailed:l,replyTo:i,formRef:p,setReplyTo:b,onSubmit:j,onChange:h,formErrors:f,formValid:v}=e,y=Object(s.jsx)("button",{type:"button",disabled:!v,onClick:j},n?"Dodaję komentarz...":"Dodaj komentarz"),O=i?Object(s.jsx)("button",{type:"button",onClick:()=>b(0)},"Anuluj"):null,g=o?Object(s.jsx)("p",null,"Dzięki! Komentarz pojawi się na stronie po zatwierdzeniu."):null,x=l&&!o?"Coś poszło nie tak... przykro mi spróbuj później.":null,S=Object.keys(f).map((e,t)=>f[e].length>0?Object(s.jsx)(u,{key:t},f[e]):"");return Object(s.jsx)("div",null,i?Object(s.jsx)("h4",null,"Odpowiedz na komentarz"):Object(s.jsx)("h4",null,"Dodaj komentarz"),Object(s.jsx)(m,{ref:p},Object(s.jsx)("div",null,Object(s.jsx)("input",{id:"author",name:"author",type:"text",placeholder:"Autor",required:!0,disabled:n,value:a,onChange:h}),Object(s.jsx)("input",{id:"email",type:"email",name:"email",placeholder:"Email",required:!0,disabled:n,value:r,onChange:h}),Object(s.jsx)("textarea",{id:"comment",name:"comment",placeholder:"Wpisz swój komentarz",cols:"45",rows:"8",maxLength:"65525",required:!0,disabled:n,value:t,onChange:h})),Object(s.jsx)(c,null,O,y)),Object(s.jsx)(d,null,g,S,x&&Object(s.jsx)(u,null,x)))},m=Object(r.a)("form",{target:"ehqtrlu0",label:"StyledForm"})({name:"hsdyiy",styles:"display:flex;flex-direction:column;align-items:center;input,textarea{font-family:inherit;font-size:0.9em;line-height:inherit;width:100%;background:var(--bg);outline:none;border:none;transition:box-shadow 0.3s ease;margin-top:1rem;padding:0.75rem 1rem;&:focus{box-shadow:var(--shadow) 0px 0px 10px 0px;}}"}),c=Object(r.a)("div",{target:"ehqtrlu1",label:"Buttons"})({name:"1xmexg2",styles:"align-self:flex-end;justify-content:space-between;& button{margin:0.5rem;}"}),u=Object(r.a)("p",{target:"ehqtrlu2",label:"ErrorMessage"})({name:"1dp8yg7",styles:"color:var(--error);margin:0;"}),d=Object(r.a)("div",{target:"ehqtrlu3",label:"FormInfo"})({name:"padqdi",styles:"text-align:center !important;"});function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function b(e,t,a,r,n,o,l){try{var s=e[o](l),i=s.value}catch(e){return void a(e)}s.done?t(i):Promise.resolve(i).then(r,n)}function j(e){return function(){var t=this,a=arguments;return new Promise((function(r,n){var o=e.apply(t,a);function l(e){b(o,r,n,l,s,"next",e)}function s(e){b(o,r,n,l,s,"throw",e)}l(void 0)}))}}function h(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class f extends n.Component{constructor(){var e;super(...arguments),e=this,h(this,"state",{comment:"",author:"",email:"",formIsSubmitting:!1,formSubmittedSuccessfully:!1,formSubmittedFailed:!1,formErrors:{email:"",comment:""},commentValid:!1,emailValid:!1,formValid:!1}),h(this,"onChange",function(){var t=j((function*(t){var{target:a}=t,{name:r,value:n}=a;e.setState({[r]:n},()=>{e.validateField(r,n)})}));return function(e){return t.apply(this,arguments)}}()),h(this,"validateField",(e,t)=>{var{formErrors:a,emailValid:r,commentValid:n}=this.state;switch(e){case"email":r=t.match(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/),a.email=r?"":"Czy wpisałeś email w prawidłowym formacie?";break;case"comment":n=t.length<65525,a.comment=n?"":"Komentarz jest za długi."}this.setState({formErrors:a,emailValid:r,commentValid:n},this.validateForm)}),h(this,"validateForm",()=>{this.setState({formValid:this.state.emailValid&&this.state.commentValid})}),h(this,"onSubmit",function(){var t=j((function*(t){var{libraries:a,postId:r,replyTo:n,setReplyTo:o}=e.props,{comment:l,author:s,email:i}=e.state;t.preventDefault(),e.setState({formIsSubmitting:!0});var m=JSON.stringify({post:r,author_name:s,author_email:i,content:l,parent:n});try{!0===(yield fetch("".concat(a.source.api.api,"/wp/v2/comments"),{method:"POST",headers:{"Content-Type":"application/json"},body:m})).ok?(e.setState({formIsSubmitting:!1,formSubmittedSuccessfully:!0,comment:"",author:"",email:""}),o(0)):e.setState({formIsSubmitting:!1,formSubmittedFailed:!0})}catch(e){console.log(e)}}));return function(e){return t.apply(this,arguments)}}())}render(){return Object(s.jsx)(i,p({onChange:this.onChange,onSubmit:this.onSubmit,formErrors:this.formErrors,replyTo:this.props.replyTo,formRef:this.props.formRef,setReplyTo:this.props.setReplyTo},this.state))}}var v=Object(l.connect)(f),y=a(24),O=a(0),g=a(6),x=a(68);var S=e=>{var{id:t,post:a,avatar:r,author:n,date:l,content:i,nestLvl:m,replyTo:c,setReplyTo:u,formRef:d}=e,p=5===m?m:m+1;return Object(s.jsx)(o.a.Fragment,null,Object(s.jsx)(k,{commentNestLvl:p},Object(s.jsx)("div",null,Object(s.jsx)(R,{alt:"avatar",src:r[96]})),Object(s.jsx)("div",null,Object(s.jsx)(w,null,n),Object(s.jsx)(T,null,Object(s.jsx)(O.b.Provider,{value:{className:"react-icons"}},Object(s.jsx)(g.a,null),Object(s.jsx)("h5",null,Object(x.a)(l)))),Object(s.jsx)(z,{dangerouslySetInnerHTML:{__html:i}}),Object(s.jsx)("button",{onClick:()=>u(t)},"Odpowiedz"))),c===t?Object(s.jsx)(v,{formRef:d,postId:a,replyTo:c,setReplyTo:u}):null,Object(s.jsx)(_,{parentId:t,postId:a,nestLvl:p,replyTo:c,setReplyTo:u}))},k=Object(r.a)("div",{target:"e1kd5tvv0",label:"Container"})("display:flex;margin:1rem 0 1rem ",e=>{var{commentNestLvl:t}=e;return 1===t?0:1.625*t},"rem;"),w=Object(r.a)("h4",{target:"e1kd5tvv1",label:"Author"})({name:"1uk1gs8",styles:"margin:0;"}),T=Object(r.a)("div",{target:"e1kd5tvv2",label:"PostInfo"})({name:"bvask8",styles:"display:flex;align-items:center;& h5{margin:0 0 0 0.5rem;font-size:75%;}.react-icons{color:var(--light-text);height:0.75em;width:0.75em;}"}),z=Object(r.a)("div",{target:"e1kd5tvv3",label:"Content"})({name:"d26kdp",styles:"font-size:0.9em;p{margin:7px 0;}"}),R=Object(r.a)("img",{target:"e1kd5tvv4",label:"Avatar"})({name:"1wc70bp",styles:"border-radius:100%;height:calc(2.25 * 1rem);width:calc(2.25 * 1rem);margin:1rem 1rem 0 0;"}),_=Object(l.connect)(e=>{var{libraries:t,parentId:a,postId:r,nestLvl:l,setReplyTo:i,replyTo:m,formRef:c}=e,[u,d]=Object(n.useState)([]),[p,b]=Object(n.useState)(!0);return Object(n.useEffect)(()=>{t.source.api.get({endpoint:"comments",params:{post:r,parent:a,per_page:100}}).then(e=>{e.json().then(e=>{d(e),b(!1)})})},[]),Object(s.jsx)(o.a.Fragment,null,p&&Object(s.jsx)(y.a,null),!p&&Object(s.jsx)("div",null,0===u.length&&0===a&&Object(s.jsx)("p",null,"Brak komentarzy"),u.length>0&&Object(s.jsx)(o.a.Fragment,null,u.map(e=>{var t=new Date(e.date);return Object(s.jsx)(S,{key:e.id,id:e.id,avatar:e.author_avatar_urls,author:e.author_name,content:e.content.rendered,post:e.post,date:t,nestLvl:l,replyTo:m,setReplyTo:i,formRef:c})}))))});t.default=e=>{var{postId:t}=e,[a,r]=Object(n.useState)(0),o=Object(n.useRef)(null);return Object(s.jsx)(C,{className:"comment"},Object(s.jsx)("h3",null,"Komentarze"),Object(s.jsx)(_,{parentId:0,postId:t,nestLvl:0,replyTo:a,setReplyTo:r,formRef:o}),a?null:Object(s.jsx)(v,{formRef:o,postId:t,replyTo:a,setReplyTo:r}))};var C=Object(r.a)("div",{target:"e1gtdfpy0",label:"CommentBox"})({name:"10cokgy",styles:"display:block;margin:20px 0;"})}}]);